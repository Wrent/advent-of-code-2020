package nine

object Xmas extends App {
  def findInvalidNumber(input: String, preamble: Int): Long = {
    val numbers = parseNumbers(input)
    for (i <- 0 to numbers.length - preamble) {
      val subarray = numbers.slice(i, i + preamble)
      val combinations = subarray.combinations(2).toArray.map(comb => comb(0) + comb(1)).toSet
      val current = numbers(i + preamble)
      if (!combinations.contains(current)) {
        return current
      }
    }
    -1
  }

  private def parseNumbers(input: String) = {
    input.split("\n").map(_.toLong)
  }

  def findWeakness(input: String, number: Long): Long = {
    val numbers = parseNumbers(input)
    for (i <- 0 to numbers.length) {
      var sum = 0L
      var j = 0
      while (sum < number) {
        sum += numbers(i + j)
        j += 1
      }
      if (sum == number) {
        val range = numbers.slice(i, i + j - 1)
        return range.min + range.max
      }
    }
    -1
  }

  val input = "33\n12\n43\n4\n19\n48\n21\n13\n29\n34\n20\n24\n25\n40\n28\n31\n38\n2\n50\n11\n44\n49\n42\n16\n41\n46\n54\n35\n6\n15\n8\n47\n10\n22\n17\n60\n19\n12\n13\n14\n18\n28\n20\n25\n21\n23\n27\n39\n24\n16\n26\n29\n40\n30\n37\n31\n33\n43\n32\n34\n44\n41\n49\n35\n36\n52\n61\n53\n42\n76\n45\n50\n46\n47\n48\n55\n93\n80\n67\n89\n142\n69\n74\n75\n70\n149\n71\n77\n78\n81\n242\n111\n88\n87\n91\n94\n155\n95\n119\n137\n188\n136\n162\n138\n139\n140\n146\n164\n221\n172\n148\n159\n215\n228\n168\n175\n182\n229\n278\n305\n340\n214\n370\n277\n273\n275\n282\n310\n302\n288\n286\n321\n568\n307\n631\n357\n845\n343\n350\n612\n389\n598\n643\n535\n561\n620\n552\n662\n548\n885\n557\n570\n678\n574\n593\n671\n859\n664\n985\n1257\n746\n693\n732\n1877\n924\n937\n1100\n1083\n1366\n1105\n1433\n1122\n1118\n1131\n1724\n1127\n1163\n1320\n1167\n1769\n1335\n2179\n1357\n1425\n1478\n2183\n1899\n2855\n2440\n1861\n2037\n2205\n2294\n2227\n2285\n2438\n3339\n2451\n2290\n2487\n2330\n3493\n2502\n2760\n4406\n2692\n2782\n2835\n2903\n4819\n3760\n4665\n6870\n4714\n4989\n4264\n8482\n6247\n4512\n6595\n4620\n4741\n4781\n9770\n4817\n9406\n5194\n5262\n5452\n5474\n10646\n8425\n5738\n10011\n9083\n8024\n9730\n8978\n8776\n10441\n10867\n9132\n9253\n15427\n9361\n9401\n9522\n19417\n10291\n10079\n10456\n14535\n14996\n10926\n11212\n18339\n14716\n13762\n16800\n17002\n19842\n18029\n19988\n28418\n18385\n18493\n37550\n18614\n18762\n18883\n18923\n24238\n20370\n28297\n32874\n25461\n22138\n29419\n24688\n24974\n33209\n30764\n44384\n33802\n35031\n55019\n36414\n50556\n50435\n37147\n37416\n37497\n49526\n37685\n47112\n39293\n49212\n45058\n74477\n46826\n70949\n82555\n84358\n119702\n70032\n81800\n80089\n68833\n70216\n71445\n74099\n73911\n74563\n74644\n75182\n194346\n76790\n82743\n109130\n119157\n143310\n91884\n113891\n142394\n115659\n185920\n184107\n138865\n139049\n142932\n149281\n146008\n140278\n141661\n146627\n167066\n151353\n201014\n225675\n229370\n430384\n243856\n174627\n205775\n230749\n207543\n241165\n229550\n254524\n254708\n277914\n279143\n288940\n372302\n281939\n295908\n448708\n286905\n293014\n541613\n654241\n650216\n403997\n380402\n1191829\n382170\n664109\n404177\n460299\n517654\n437093\n484074\n557057\n543464\n572157\n568083\n561082\n568844\n579919\n678078\n1078736\n667307\n669075\n673416\n762572\n1077593\n784399\n1482733\n784579\n786347\n841270\n864476\n1106168\n921167\n954747\n980557\n1045156\n1358504\n2051577\n1129165\n1129926\n1141001\n1148763\n1247226\n1336382\n1537892\n1340723\n1342491\n1435988\n1546971\n1568978\n1570746\n2278689\n1707514\n1627617\n1705746\n2062168\n2527528\n2175082\n2025713\n2676136\n2270166\n2259091\n2465547\n2270927\n2711747\n4303753\n3963516\n3046469\n3063605\n2968340\n2683214\n4851218\n4982674\n5305560\n3274724\n3198363\n3333363\n3335131\n3886708\n3731459\n4087881\n6358047\n4200795\n4491260\n4529257\n4530018\n7459600\n4736474\n4954141\n7423012\n5651554\n6016577\n6379832\n5746819\n5881577\n6609855\n6473087\n9936815\n9266492\n6608087\n12464855\n12413741\n7066590\n15283069\n7819340\n8288676\n8692055\n9484159\n9265731\n9059275\n10970718\n10483293\n14918046\n10605695\n11398373\n21524130\n11628396\n12126651\n16332321\n12354664\n13081174\n13539677\n14885930\n15873818\n18543434\n17085071\n15355266\n15758645\n16108016\n16511395\n16980731\n17751330\n28113309\n18325006\n22234091\n21454011\n32958889\n22004068\n22732346\n33580662\n28866059\n31624608\n24481315\n25435838\n25894341\n30061905\n28425607\n30241196\n36868440\n38745486\n31113911\n55726217\n31866661\n64072800\n41947233\n34732061\n36076336\n57518949\n39779017\n43458079\n44186357\n46485383\n47213661\n50375656\n68312723\n92794038\n70020213\n59213376\n96081816\n54319948\n58487512\n58666803\n80616852\n74511078\n62980572\n67942997\n78023569\n78190140\n70808397\n76679294\n75855353\n90154673\n83237096\n113533324\n121481648\n90671740\n97589317\n101533609\n109589032\n112807460\n141004141\n172100395\n112986751\n208947138\n161260665\n223015257\n121647375\n187612601\n235180699\n147487691\n168344813\n204205064\n146663750\n152534647\n159092449\n166010026\n210576068\n312673776\n188261057\n192205349\n248197359\n199122926\n369668517\n222396492\n259650501\n253990892\n234634126\n395894791\n464566960\n307924415\n268311125\n289992188\n452402423\n294151441\n572324277\n363297513\n460516474\n516508484\n311627096\n354271083\n387383983\n432972560\n470593851\n617288405\n433757052\n630528917\n608261975\n549642689\n457030618\n553801942\n983399741\n502945251\n558303313\n562462566\n648422524\n584143629\n601619284\n699011079\n879805997\n530627549\n665898179\n1202224466\n741655066\n928915501\n787243643\n890787670\n1133474168\n904350903\n1324544722\n1209881259\n959975869\n987658167\n1006673307\n1010832560\n1033572800\n1061248564\n1087088880\n1088930862\n1093090115\n1114771178\n1132246833\n1196525728\n1453141822\n1272282615\n1317871192\n1938180794\n1691594546\n1528898709\n1678031313\n1902014821\n3148062053\n1993548669\n1864326772\n2017505867\n1966649176\n1947634036\n1994331474\n2094821364\n2072081124\n2257774292\n2148337444\n2176019742\n3350864407\n2311296906\n3639228582\n2328772561\n2771013014\n2846769901\n3009465738\n3182197964\n3623720073\n3206930022\n3522447378\n3542358085\n3766341593\n3811960808\n4205408328\n3830975948\n3914283212\n3941965510\n6531913116\n4066412598\n5158066807\n4220418568\n4433794034\n4324357186\n6140733369\n5099785575\n4640069467\n6658730709\n5175542462\n6389127986\n5856235639\n6191663702\n7484323595\n6729377400\n11887444207\n7608770683\n7308699678\n7597317541\n7642936756\n9739855042\n8266322696\n7856248722\n8654212602\n11704742163\n8286831166\n11369446867\n8544775754\n9815611929\n10516020888\n10275328037\n10496305106\n11029197453\n14478494868\n11031778101\n12245363625\n15340572317\n12921041102\n14213700995\n14038077078\n14906017219\n14917470361\n14951636434\n15240254297\n18102443095\n21304525490\n18360387683\n16143079888\n19316028619\n16831606920\n18562159203\n18820103791\n19041080860\n25067274531\n22520691662\n29378649395\n21525502559\n27172277341\n23277141726\n48476802831\n25166404727\n26959118180\n43416726473\n28251778073\n40018910965\n29823487580\n29869106795\n30191890731\n32974686808\n34245522983\n35393766123\n34503467571\n34705239091\n38136132410\n35872687780\n41082850865\n47292858933\n40566583419\n44046194221\n46691907286\n44802644285\n69208706662\n48443546453\n55035511522\n52125522907\n53418182800\n60060997526\n80196410408\n58075265653\n91049952461\n78291717204\n62843793603\n64897129822\n67220209791\n68950762074\n69897233694\n78549661792\n78702715829\n104863641811\n76439271199\n81649434284\n91339053154\n84612777640\n95135453739\n145390033273\n96928167192\n101861729253\n100569069360\n125295475444\n105543705707\n185740116115\n118136263179\n122972395475\n131794555677\n127740923425\n130064003394\n132117339613\n147500423866\n136170971865\n138847995768\n157252377621\n220783749505\n155141987028\n268288311478\n161052048839\n365216478670\n212353701065\n179748231379\n497011034347\n273278250207\n207405434960\n255359478838\n206112775067\n275388640800\n223679968886\n270472819341\n402267375018\n250713318900\n767483853688\n257804926819\n387476818451\n270965335381\n275018967633\n318304426460\n296100373389\n312394364649\n428420237235\n316194035867\n340800280218\n367164823906\n506072797738\n703808878035\n385861006446\n413518210027\n481501415867\n1153344860134\n499068609686\n429792743953\n474393287786\n481484895705\n1197276597641\n508518245719\n664231528927\n699385572616\n528770262200\n1022113304495\n615819247851\n571119341022\n634498462327\n608494738038\n780683033933\n656994316085\n887911497813\n726661286664\n1232734084402\n1029337457878\n799379216473\n884929616132\n928861353639\n904186031739\n1661863105853\n911277639658\n1393447861851\n1235179532383\n1457631615839\n1117012983757\n1896965613329\n1351802374955\n1297780627686\n1099889603222\n1179614079060\n2332623687624\n1630847318403\n1899268819695\n1880572637155\n1383655602749\n1544905813898\n1526040503137\n1611590902796\n1710656856131\n1684308832605\n1703565248212\n1789115647871\n2649583002641\n1815463671397\n2011167242880\n3156496716694\n2296627062817\n2414793611443\n3199119274146\n2705654582197\n2279503682282\n5098388093841\n2397670230908\n2483545205971\n2883179327272\n2909696105886\n3499772504002\n2928561416647\n4009585709108\n5495746336963\n3070946317035\n4175623505778\n3295899735401\n5571290328137\n5280849558180\n3492680896083\n9456473063958\n6205595841287\n3826630914277\n7496058324749\n5179806390089\n4694297293725\n6590417117221\n4881215436879\n5189199788168\n4677173913190\n5326231647555\n5307366336794\n5366724533243\n5792875433158\n7990197029126\n5999507733682\n6224461152048\n6366846052436\n9276542158322\n11505310710228\n8475706125490\n6788580631484\n11871266675401\n15264286756974\n9859526948519\n15823319116394\n10020528941280\n8503804827467\n9371471206915\n9558389350069\n9575512730604\n14697702854470\n9866373701358\n9984540249984\n10003405560745\n10633597984349\n15370978940597\n16002913294427\n13155426683920\n13013041783532\n23846685066087\n12591307204484\n15292385458951\n24568927617273\n16160051838399\n19987945810729\n16346969981553\n17875276034382\n20618138234333\n19725900649877\n19424763051427\n18062194177536\n18079317558071\n18946983937519\n19441886431962\n20209110714953\n22594712765229\n19850913951342\n36437992270571\n20637003545094\n23224905188833\n28751359042883\n29158339978347\n33364537398873\n25604348988016\n27883692663435\n35816212393317\n31452437297350\n32507021819952\n37504080609498\n34409164159089\n34222246015935\n35937470211918\n40362904194971\n55258098825279\n37913108128878\n73320293002815\n37026301495590\n38388870369481\n43075819140175\n59025873914575\n48520696208529\n40487917496436\n43861908733927\n46241352533110\n60610777275697\n63993219357497\n70159716227853\n53488041651451\n57056786285366\n59336129960785\n70038458409252\n63959459117302\n66729267835887\n68631410175024\n70346634371007\n129372508285582\n72963771707508\n75415171865071\n74939409624468\n83267654028700"
  println(findInvalidNumber(input, 25))
  println(findWeakness(input, 530627549))
}
