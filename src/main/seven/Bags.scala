package seven

object Bags extends App {

  def countOutermostBags(input: String, bag: String): Int = {
    val bagsMap = parseBags(input)
    bagsMap.map(b => b._2.getAllChildren(bagsMap)).count(s => s.contains(bag))
  }

  private def parseBags(input: String) = {
    input.split("\n").map(parseBag).map(b => (b.label, b)).toMap
  }

  def countNumberOfRequiredBags(input: String, bag: String): Int = {
    val bagsMap = parseBags(input)
    bagsMap(bag).countAllChildren(bagsMap)
  }

  private def parseBag(bag: String): Bag = {
    val regex = "(.*) bags contain (.*)\\.".r
    val label = for (m <- regex.findFirstMatchIn(bag)) yield m.group(1)
    val content = for (m <- regex.findFirstMatchIn(bag)) yield m.group(2)
    Bag(label.get, parseContent(content.get))
  }

  private def parseContent(content: String): Map[String, Int] = {
    if (content == "no other bags") {
      return Map.empty
    }
    val bags = content.split(", ")
    val regex = "(\\d+) (.*) bags?".r
    bags.map(bag => {
      val count = for (m <- regex.findFirstMatchIn(bag)) yield m.group(1)
      val label = for (m <- regex.findFirstMatchIn(bag)) yield m.group(2)
      (label.get, count.get.toInt)
    }).toMap
  }

  val input = "clear maroon bags contain 1 dull lavender bag.\nwavy turquoise bags contain 4 vibrant magenta bags, 4 light violet bags, 5 bright gold bags, 2 faded black bags.\nwavy beige bags contain 3 plaid magenta bags, 3 wavy lime bags, 2 clear turquoise bags, 3 muted cyan bags.\nmirrored black bags contain 1 plaid red bag, 3 light gold bags, 3 wavy violet bags.\nvibrant fuchsia bags contain 2 dark lime bags, 2 mirrored black bags, 2 light magenta bags, 2 drab chartreuse bags.\nvibrant plum bags contain 4 dim cyan bags, 3 pale maroon bags.\ndark tan bags contain 3 faded white bags, 3 wavy tan bags, 4 pale indigo bags.\nfaded green bags contain 2 dim cyan bags, 5 dim magenta bags, 2 wavy maroon bags, 2 faded white bags.\nclear black bags contain 4 striped green bags, 2 dim violet bags, 1 dull tan bag.\nlight olive bags contain 5 striped indigo bags, 3 dim coral bags, 1 drab bronze bag, 3 mirrored beige bags.\ndim black bags contain 1 faded tan bag, 5 shiny crimson bags.\nstriped fuchsia bags contain 3 dim cyan bags.\npale plum bags contain 1 light lavender bag, 3 dim aqua bags, 1 shiny blue bag, 5 dark orange bags.\nwavy crimson bags contain 2 pale crimson bags, 1 muted teal bag, 2 drab olive bags, 4 faded green bags.\nmirrored aqua bags contain 4 shiny red bags, 4 light maroon bags, 4 light violet bags, 5 clear salmon bags.\nlight orange bags contain 4 dim crimson bags, 3 dim red bags, 3 mirrored orange bags.\nshiny bronze bags contain 3 mirrored violet bags, 1 dull blue bag.\nvibrant red bags contain 1 drab beige bag.\nlight violet bags contain 4 dim cyan bags.\ndotted aqua bags contain 1 dotted crimson bag, 3 dark red bags, 4 dark fuchsia bags.\ndrab teal bags contain 2 mirrored violet bags, 2 mirrored beige bags, 2 shiny crimson bags.\nclear coral bags contain 5 striped fuchsia bags, 2 shiny indigo bags.\ndim gray bags contain 4 plaid salmon bags, 4 faded purple bags, 4 dull violet bags, 3 clear coral bags.\ndotted cyan bags contain 1 shiny turquoise bag.\ndim red bags contain 2 wavy magenta bags, 2 faded maroon bags, 5 striped fuchsia bags.\ndull magenta bags contain 4 clear teal bags.\nvibrant coral bags contain 3 pale indigo bags, 5 wavy red bags, 1 clear lime bag, 1 bright red bag.\nstriped silver bags contain 3 posh chartreuse bags.\nposh coral bags contain 1 mirrored orange bag, 2 plaid lavender bags.\ndull brown bags contain 1 light salmon bag.\ndotted bronze bags contain 2 clear teal bags, 2 muted orange bags, 3 dark cyan bags, 2 muted maroon bags.\nposh red bags contain 2 posh gray bags, 1 wavy blue bag.\nfaded violet bags contain 4 light purple bags.\nfaded red bags contain 3 drab brown bags.\nmirrored tomato bags contain 5 muted maroon bags, 1 wavy lavender bag.\nvibrant beige bags contain 4 muted maroon bags, 2 plaid violet bags, 1 dim cyan bag.\nshiny turquoise bags contain 2 faded turquoise bags, 1 bright olive bag, 1 striped aqua bag, 2 mirrored blue bags.\nplaid black bags contain 1 shiny teal bag.\ndull fuchsia bags contain 3 posh tan bags, 4 dotted coral bags.\nwavy tomato bags contain 3 light lavender bags.\nposh salmon bags contain 5 plaid chartreuse bags.\nstriped green bags contain 3 dim cyan bags, 1 dark cyan bag, 3 shiny coral bags.\ndim brown bags contain 4 dotted tan bags, 2 dark white bags, 1 plaid coral bag.\nwavy plum bags contain 5 muted crimson bags.\nstriped turquoise bags contain 2 bright plum bags, 1 muted salmon bag, 2 vibrant white bags, 3 pale coral bags.\nposh white bags contain 5 mirrored plum bags, 1 drab lavender bag, 4 drab brown bags.\nwavy purple bags contain 4 striped fuchsia bags, 4 shiny indigo bags, 1 wavy violet bag.\nmuted coral bags contain 1 vibrant plum bag, 4 plaid salmon bags, 2 bright indigo bags.\nlight salmon bags contain 5 wavy olive bags, 2 dull violet bags, 3 vibrant orange bags.\nlight indigo bags contain 3 mirrored fuchsia bags.\ndrab white bags contain 1 pale green bag, 1 shiny teal bag, 4 bright yellow bags.\nvibrant teal bags contain 4 drab turquoise bags, 3 shiny coral bags, 4 posh tan bags.\nmuted yellow bags contain 2 faded lavender bags.\npale silver bags contain 4 dotted green bags.\nfaded gold bags contain 1 faded orange bag, 2 drab chartreuse bags.\nmirrored teal bags contain 2 dim tan bags, 2 plaid violet bags, 4 pale brown bags.\nmuted chartreuse bags contain 4 shiny yellow bags, 1 posh beige bag.\nclear yellow bags contain 3 faded maroon bags, 5 striped blue bags, 3 dull silver bags, 5 striped gold bags.\nvibrant black bags contain 2 dull green bags, 3 vibrant white bags, 1 mirrored gold bag.\nstriped indigo bags contain 1 vibrant orange bag, 3 striped black bags, 2 pale aqua bags, 3 light crimson bags.\nposh lime bags contain 1 clear lime bag, 1 pale aqua bag, 3 plaid white bags.\ndrab silver bags contain 3 wavy aqua bags, 2 plaid yellow bags, 1 posh black bag, 2 plaid beige bags.\nmirrored chartreuse bags contain 1 drab teal bag, 5 posh maroon bags.\nfaded brown bags contain 5 mirrored blue bags, 2 pale aqua bags, 3 dim black bags.\nvibrant orange bags contain 3 bright tan bags, 5 shiny teal bags, 4 dotted crimson bags, 2 posh cyan bags.\ndrab blue bags contain 4 dark aqua bags.\nplaid beige bags contain 2 plaid salmon bags, 4 dull maroon bags.\nfaded white bags contain 1 dim aqua bag.\nbright lime bags contain 3 drab gray bags, 1 striped lime bag.\ndim maroon bags contain 1 dotted salmon bag.\nclear fuchsia bags contain 2 pale plum bags.\nplaid violet bags contain 3 light magenta bags, 1 bright indigo bag, 1 pale tan bag.\ndrab maroon bags contain 4 light gray bags, 1 striped orange bag, 5 drab salmon bags.\nlight turquoise bags contain 4 plaid red bags, 5 drab plum bags.\npale magenta bags contain 3 wavy red bags, 2 muted orange bags.\nstriped plum bags contain 3 dark violet bags, 5 striped aqua bags, 1 posh chartreuse bag.\nmuted silver bags contain 1 striped lavender bag, 4 dotted salmon bags.\ndark olive bags contain 1 mirrored cyan bag, 4 dull tan bags.\ndotted brown bags contain 4 bright lavender bags.\nbright salmon bags contain 4 drab blue bags.\nclear orange bags contain 1 posh cyan bag.\nclear tomato bags contain 1 clear red bag, 2 shiny yellow bags.\nwavy black bags contain 1 mirrored bronze bag.\nvibrant gold bags contain 2 posh olive bags, 4 shiny red bags.\nmuted tomato bags contain 5 dotted indigo bags, 2 dark magenta bags, 1 faded indigo bag, 1 shiny indigo bag.\ndim tan bags contain 2 drab brown bags.\nposh purple bags contain 4 light violet bags, 5 drab chartreuse bags, 4 striped fuchsia bags.\ndrab turquoise bags contain 3 bright indigo bags.\nclear gold bags contain 2 wavy magenta bags, 1 bright olive bag.\ndim crimson bags contain 2 drab gold bags, 1 dull tomato bag, 1 posh indigo bag.\ndark lime bags contain 5 wavy magenta bags, 3 mirrored fuchsia bags, 5 dotted chartreuse bags, 1 dull bronze bag.\nposh orange bags contain 2 mirrored aqua bags, 1 shiny green bag, 5 plaid teal bags.\ndotted chartreuse bags contain 3 wavy violet bags, 5 pale white bags, 1 posh violet bag, 2 dark aqua bags.\nwavy green bags contain 3 dim olive bags, 4 light lavender bags, 3 light olive bags.\ndark beige bags contain 4 shiny orange bags.\ndark orange bags contain 5 clear orange bags.\nvibrant white bags contain 2 dotted purple bags, 4 dark fuchsia bags, 3 dull bronze bags.\nshiny fuchsia bags contain 2 shiny gold bags.\nplaid teal bags contain 4 light maroon bags.\nfaded beige bags contain 4 dark aqua bags, 4 mirrored black bags, 1 vibrant orange bag.\nwavy lime bags contain 4 dull cyan bags, 1 striped aqua bag, 2 plaid brown bags, 5 vibrant teal bags.\nwavy silver bags contain 3 drab lime bags.\nposh lavender bags contain 1 dotted purple bag.\ndark crimson bags contain 3 posh green bags, 3 dark green bags.\ndull teal bags contain 5 plaid salmon bags.\nclear brown bags contain 5 mirrored purple bags, 5 vibrant orange bags.\nstriped white bags contain 3 dull maroon bags.\nclear violet bags contain 4 bright red bags, 1 dark orange bag, 3 dull maroon bags, 3 muted maroon bags.\nfaded magenta bags contain 1 shiny yellow bag.\ndim beige bags contain 5 striped salmon bags.\ndull white bags contain 1 shiny tan bag.\nposh crimson bags contain 1 mirrored green bag, 4 dark orange bags.\nlight teal bags contain 5 bright tan bags, 5 light indigo bags.\nwavy orange bags contain 2 pale maroon bags, 2 clear maroon bags.\nlight lime bags contain 3 dim silver bags, 1 dim purple bag, 1 striped cyan bag.\nmuted gray bags contain 2 light green bags, 4 dark aqua bags, 4 plaid coral bags, 2 mirrored lime bags.\nbright fuchsia bags contain 1 striped crimson bag, 5 faded purple bags, 2 plaid violet bags, 2 vibrant magenta bags.\nlight chartreuse bags contain 4 bright bronze bags, 3 wavy teal bags, 5 muted tan bags, 4 light bronze bags.\nplaid gold bags contain 5 wavy teal bags, 4 clear magenta bags.\ndull silver bags contain 5 dim aqua bags, 3 muted silver bags, 3 mirrored blue bags, 4 clear orange bags.\nshiny maroon bags contain 3 dark olive bags, 3 muted turquoise bags.\nfaded turquoise bags contain 1 light gold bag, 3 pale fuchsia bags, 4 shiny silver bags.\nposh indigo bags contain 4 muted salmon bags, 2 pale green bags.\ndotted violet bags contain 4 shiny lime bags, 4 muted violet bags, 1 muted yellow bag, 4 shiny red bags.\nfaded salmon bags contain 5 muted lime bags.\ndotted white bags contain 5 dotted indigo bags, 3 wavy brown bags, 5 pale aqua bags.\ndark brown bags contain 5 wavy maroon bags, 3 plaid beige bags, 5 drab white bags.\nshiny white bags contain 1 dotted bronze bag, 5 dull black bags, 3 muted white bags, 4 wavy maroon bags.\nbright chartreuse bags contain 1 striped green bag.\nplaid indigo bags contain 4 dull bronze bags.\nbright violet bags contain 1 shiny yellow bag.\npale maroon bags contain 3 striped fuchsia bags, 5 plaid silver bags, 4 shiny teal bags.\nshiny plum bags contain 4 wavy plum bags, 5 faded tomato bags.\nwavy tan bags contain 3 dim black bags, 4 posh black bags.\nplaid lavender bags contain 4 dull tan bags, 2 vibrant beige bags.\nfaded aqua bags contain 1 dull lavender bag, 4 vibrant orange bags, 4 posh black bags.\nfaded lavender bags contain 1 shiny coral bag, 1 plaid black bag, 1 wavy bronze bag, 5 dark coral bags.\nshiny indigo bags contain 4 dotted green bags.\ndark bronze bags contain 5 faded crimson bags, 3 dim lavender bags, 2 wavy white bags.\nmuted olive bags contain 5 light yellow bags, 1 dull chartreuse bag, 4 dim lime bags.\nwavy olive bags contain 3 dotted orange bags.\nvibrant purple bags contain 3 faded maroon bags, 1 clear bronze bag, 5 striped black bags, 5 muted indigo bags.\nstriped coral bags contain 1 mirrored black bag.\ndull violet bags contain 1 dotted purple bag.\ndim blue bags contain 1 shiny indigo bag, 5 striped cyan bags.\ndrab aqua bags contain 5 clear chartreuse bags.\nstriped bronze bags contain 5 wavy lavender bags, 5 shiny silver bags, 2 posh crimson bags.\nstriped orange bags contain 1 muted salmon bag.\nclear white bags contain 2 dark coral bags, 1 plaid silver bag, 2 drab gold bags, 4 dark red bags.\ndotted tan bags contain 4 mirrored silver bags.\nstriped crimson bags contain 2 dim olive bags, 3 dotted purple bags.\nmuted bronze bags contain 5 dotted gray bags.\nstriped tomato bags contain 4 mirrored aqua bags.\ndrab tan bags contain 1 dotted white bag, 3 dotted coral bags, 5 muted olive bags.\nlight maroon bags contain 1 dim olive bag.\ndark blue bags contain 1 mirrored maroon bag, 1 shiny salmon bag, 3 dull cyan bags.\nvibrant maroon bags contain 5 dull fuchsia bags.\nbright gray bags contain 1 wavy red bag.\nposh brown bags contain 2 dim beige bags, 2 shiny teal bags.\nstriped blue bags contain 1 dotted chartreuse bag, 2 clear violet bags, 1 drab teal bag.\ndim indigo bags contain 3 clear purple bags.\nstriped teal bags contain 2 dotted teal bags.\nplaid orange bags contain 5 dim black bags, 2 wavy bronze bags, 4 drab bronze bags, 2 shiny salmon bags.\npale salmon bags contain 2 dotted plum bags.\nvibrant aqua bags contain 2 wavy orange bags.\nfaded coral bags contain 5 dark fuchsia bags, 3 vibrant orange bags, 4 posh lavender bags, 5 dotted purple bags.\nbright tomato bags contain 3 plaid plum bags, 5 faded maroon bags, 4 bright green bags.\nwavy gray bags contain 5 pale silver bags, 2 clear cyan bags, 1 dim yellow bag, 1 clear aqua bag.\ndark aqua bags contain 1 pale maroon bag, 1 dotted gray bag, 2 muted plum bags, 4 muted orange bags.\nplaid maroon bags contain 4 muted plum bags, 1 plaid beige bag, 4 bright indigo bags, 5 vibrant orange bags.\nlight gray bags contain 1 faded crimson bag.\nshiny silver bags contain 4 striped cyan bags, 4 mirrored fuchsia bags, 2 plaid salmon bags.\nplaid blue bags contain 2 dim olive bags, 2 posh purple bags, 1 dotted bronze bag, 2 shiny fuchsia bags.\nshiny olive bags contain 1 posh indigo bag.\ndotted plum bags contain 4 shiny coral bags, 2 drab beige bags, 3 dim gray bags.\npale beige bags contain 4 drab orange bags.\nmuted white bags contain 1 faded orange bag, 2 mirrored red bags, 3 wavy fuchsia bags, 2 drab blue bags.\ndark gold bags contain 1 mirrored beige bag, 3 plaid violet bags, 2 dotted bronze bags, 1 wavy bronze bag.\nclear cyan bags contain 1 striped fuchsia bag, 4 dotted lime bags, 3 drab olive bags, 3 dull blue bags.\nbright black bags contain 2 posh lavender bags, 3 wavy brown bags.\nbright olive bags contain 4 dark chartreuse bags, 3 plaid salmon bags, 2 muted orange bags, 5 pale aqua bags.\nlight silver bags contain 3 plaid maroon bags.\ndrab indigo bags contain 1 muted cyan bag, 1 clear magenta bag, 1 dark brown bag.\ndull gold bags contain 2 posh beige bags, 1 vibrant magenta bag.\nmuted purple bags contain 2 dark salmon bags, 4 faded brown bags, 5 faded black bags.\npale violet bags contain 2 dull bronze bags, 3 dull aqua bags.\ndark green bags contain 3 mirrored white bags, 2 striped cyan bags, 4 muted chartreuse bags, 2 faded white bags.\ndark indigo bags contain 4 dotted green bags, 4 dotted cyan bags, 5 bright bronze bags, 5 faded bronze bags.\nposh plum bags contain 1 light crimson bag.\ndark yellow bags contain 1 faded purple bag, 2 muted olive bags.\nbright crimson bags contain 2 striped tan bags.\ndim plum bags contain 2 bright silver bags, 1 shiny beige bag, 2 posh teal bags.\ndull blue bags contain 1 faded purple bag.\ndrab violet bags contain 1 dim white bag, 4 vibrant lavender bags, 3 dull magenta bags.\nmirrored yellow bags contain 3 wavy lavender bags.\nclear plum bags contain 3 vibrant cyan bags, 4 plaid chartreuse bags, 5 light violet bags.\ndim coral bags contain 3 mirrored red bags, 1 pale maroon bag, 3 dark chartreuse bags.\nstriped purple bags contain 1 mirrored tomato bag, 4 dotted green bags.\nwavy magenta bags contain 4 mirrored bronze bags, 5 bright fuchsia bags, 3 mirrored violet bags, 3 drab aqua bags.\nfaded crimson bags contain 5 posh black bags.\ndotted maroon bags contain 1 muted salmon bag, 5 striped salmon bags.\ndark violet bags contain 1 plaid black bag, 3 dim gray bags, 3 bright lavender bags.\nbright lavender bags contain 4 mirrored blue bags, 2 mirrored black bags, 3 wavy red bags.\nlight white bags contain 1 striped salmon bag, 3 plaid white bags, 5 clear lime bags, 5 dim aqua bags.\nwavy lavender bags contain 2 dull tan bags.\nvibrant violet bags contain 1 drab olive bag, 2 faded indigo bags, 2 posh black bags.\nbright silver bags contain 5 posh black bags, 3 posh lavender bags, 4 clear lime bags, 2 dim aqua bags.\nmuted cyan bags contain 2 clear red bags, 2 plaid black bags.\ndull coral bags contain 5 dotted tan bags.\ndull purple bags contain 1 dotted lavender bag.\nmuted gold bags contain 4 dim aqua bags.\nwavy maroon bags contain 4 light aqua bags, 5 bright black bags, 3 dull black bags.\nposh violet bags contain 2 dark chartreuse bags, 3 striped fuchsia bags.\ndull olive bags contain 1 dark chartreuse bag, 1 plaid tomato bag, 5 muted coral bags, 5 light gold bags.\nshiny coral bags contain 5 dull violet bags, 3 bright tan bags, 3 muted orange bags, 3 shiny indigo bags.\ndotted green bags contain 4 wavy bronze bags, 3 dull violet bags, 2 striped beige bags.\ndull tan bags contain 2 light maroon bags, 5 posh tan bags, 4 pale tan bags.\nmirrored gold bags contain 4 wavy lime bags.\nfaded lime bags contain 5 dotted salmon bags, 1 plaid brown bag, 5 posh tan bags.\nplaid tan bags contain 5 drab plum bags, 2 dotted salmon bags.\nshiny cyan bags contain 2 dark coral bags, 4 posh yellow bags, 5 dotted brown bags, 5 dull maroon bags.\nposh aqua bags contain 2 light bronze bags, 4 light green bags.\nclear crimson bags contain 1 faded crimson bag, 2 posh tan bags, 2 dotted orange bags.\ndrab black bags contain 2 dull tomato bags, 4 muted red bags, 4 dotted turquoise bags, 1 mirrored red bag.\nvibrant blue bags contain 2 posh coral bags, 3 wavy teal bags.\nlight gold bags contain 5 posh gray bags, 5 shiny brown bags, 3 dark coral bags.\nwavy teal bags contain 5 bright tan bags, 5 clear coral bags.\nclear blue bags contain 1 striped green bag, 3 mirrored green bags.\ndark tomato bags contain 4 wavy yellow bags, 4 striped magenta bags, 1 wavy bronze bag, 1 dotted salmon bag.\ndull black bags contain 2 posh lavender bags, 5 pale aqua bags.\nmirrored crimson bags contain 4 dim turquoise bags, 2 mirrored aqua bags, 1 drab tan bag.\ndark chartreuse bags contain 1 dotted green bag.\nshiny salmon bags contain 5 light yellow bags, 4 pale fuchsia bags, 5 muted olive bags.\nlight magenta bags contain 1 clear teal bag.\ndim orange bags contain 3 dark plum bags.\nstriped black bags contain 5 shiny coral bags, 2 dull violet bags, 3 drab olive bags, 1 mirrored red bag.\ndotted gold bags contain 3 pale indigo bags, 2 wavy salmon bags, 1 light plum bag.\nshiny chartreuse bags contain 2 plaid green bags.\nlight cyan bags contain 3 posh chartreuse bags, 5 striped lime bags, 4 wavy red bags.\nposh chartreuse bags contain 2 wavy violet bags.\nplaid fuchsia bags contain 4 mirrored blue bags, 5 pale tan bags.\nmuted black bags contain 2 striped lime bags, 2 light olive bags, 2 plaid tan bags, 2 light lavender bags.\nstriped aqua bags contain 5 mirrored red bags.\nshiny lime bags contain 2 faded white bags, 4 clear silver bags, 1 wavy fuchsia bag, 5 plaid lavender bags.\ndrab magenta bags contain 5 dim purple bags, 2 dim silver bags, 3 clear brown bags, 4 wavy turquoise bags.\nmirrored silver bags contain 5 mirrored cyan bags, 5 dull silver bags, 5 drab violet bags.\nstriped cyan bags contain 5 bright indigo bags.\nwavy violet bags contain 2 dim cyan bags, 2 plaid silver bags.\npale teal bags contain 1 light maroon bag, 1 clear lime bag, 4 dark turquoise bags.\nwavy fuchsia bags contain 3 drab plum bags, 1 dotted white bag.\nmuted green bags contain 5 bright orange bags.\nlight yellow bags contain 4 shiny bronze bags, 4 wavy white bags, 3 drab turquoise bags.\nplaid purple bags contain 5 dotted purple bags, 3 plaid magenta bags, 1 wavy magenta bag.\nposh bronze bags contain 1 vibrant coral bag.\nvibrant green bags contain 3 plaid orange bags, 1 posh fuchsia bag, 1 faded brown bag.\ndim yellow bags contain 4 shiny gold bags, 5 mirrored magenta bags.\ndrab lavender bags contain 3 muted coral bags, 5 drab aqua bags.\ndull chartreuse bags contain 1 vibrant white bag.\nplaid bronze bags contain 4 posh indigo bags.\nmirrored brown bags contain 2 wavy violet bags, 1 shiny crimson bag.\nclear silver bags contain 5 dim green bags, 2 vibrant gray bags, 3 pale white bags.\ndrab salmon bags contain 5 shiny teal bags, 2 plaid teal bags, 4 striped magenta bags.\ndotted tomato bags contain 4 shiny tan bags, 3 dotted bronze bags, 4 clear lime bags.\nlight tan bags contain 4 dotted silver bags, 1 mirrored violet bag, 3 dim lime bags.\nshiny tan bags contain 4 dotted gray bags, 5 striped cyan bags, 2 dull violet bags, 5 pale maroon bags.\npale tomato bags contain 4 bright orange bags, 2 posh chartreuse bags.\nfaded silver bags contain 4 dark turquoise bags, 4 faded gray bags, 5 wavy bronze bags.\nplaid gray bags contain 1 bright red bag.\npale olive bags contain 3 posh beige bags, 4 faded coral bags.\nplaid yellow bags contain 5 dim blue bags, 1 drab plum bag, 1 dark coral bag, 2 faded purple bags.\ndim green bags contain 1 muted orange bag.\nwavy cyan bags contain 4 clear brown bags, 5 vibrant tan bags.\nclear teal bags contain 4 dark chartreuse bags.\nvibrant bronze bags contain 2 dim cyan bags, 4 shiny lime bags.\nmuted salmon bags contain 4 clear coral bags, 2 posh lavender bags, 2 pale aqua bags.\nshiny gray bags contain 5 drab blue bags, 2 dull chartreuse bags, 5 wavy bronze bags, 2 dull salmon bags.\nmuted blue bags contain 4 faded black bags, 3 dim lavender bags, 5 light violet bags, 2 mirrored maroon bags.\ndotted blue bags contain 4 light bronze bags.\ndark teal bags contain 4 dim lavender bags, 4 shiny gray bags, 4 wavy salmon bags, 2 pale white bags.\nlight purple bags contain 1 clear salmon bag, 1 plaid brown bag.\nlight tomato bags contain 4 striped lavender bags, 1 muted bronze bag.\nmuted lime bags contain 4 mirrored olive bags, 1 dark aqua bag.\npale bronze bags contain 1 mirrored brown bag.\ndotted black bags contain 4 vibrant magenta bags.\nshiny brown bags contain 2 bright tan bags.\nfaded cyan bags contain 4 dotted lavender bags, 2 vibrant fuchsia bags, 3 light green bags.\ndrab cyan bags contain 5 shiny lime bags.\nfaded tan bags contain 5 shiny silver bags.\ndim fuchsia bags contain 5 dim orange bags, 3 mirrored fuchsia bags.\ndrab fuchsia bags contain 4 plaid silver bags.\nstriped beige bags contain no other bags.\nmuted fuchsia bags contain 1 plaid silver bag, 5 shiny silver bags, 3 dark orange bags, 5 posh silver bags.\nbright beige bags contain 2 light crimson bags, 4 posh violet bags, 5 dotted purple bags.\nmuted crimson bags contain 2 wavy salmon bags, 1 clear tomato bag, 1 pale bronze bag.\ndrab olive bags contain 1 dull violet bag, 5 dotted crimson bags, 1 bright gold bag, 4 muted orange bags.\ndotted silver bags contain 2 dim indigo bags, 2 clear gray bags.\npale blue bags contain 3 dotted teal bags, 5 muted tomato bags, 1 clear tan bag.\ndark fuchsia bags contain 2 dark plum bags, 5 posh tan bags.\ndull plum bags contain 3 pale green bags.\nfaded indigo bags contain 4 plaid white bags.\nposh teal bags contain 5 drab maroon bags, 4 striped purple bags, 4 clear tan bags.\nlight beige bags contain 1 dull orange bag.\npale turquoise bags contain 1 bright olive bag, 5 drab tomato bags, 5 faded turquoise bags, 1 mirrored brown bag.\nshiny orange bags contain 4 plaid silver bags, 2 wavy brown bags, 5 clear teal bags.\npale lavender bags contain 4 light plum bags.\nclear olive bags contain 2 wavy fuchsia bags, 4 dim black bags.\nfaded blue bags contain 5 pale white bags, 5 plaid tomato bags, 3 muted orange bags, 5 clear red bags.\ndotted salmon bags contain 5 light gold bags, 1 muted green bag, 3 light black bags, 1 mirrored green bag.\nvibrant yellow bags contain 1 clear purple bag, 5 dotted coral bags.\nlight blue bags contain 4 dark tan bags, 1 mirrored aqua bag, 5 clear lime bags, 5 drab coral bags.\nbright blue bags contain 4 dim maroon bags.\nmirrored orange bags contain 4 dotted plum bags, 2 dotted yellow bags, 4 dull cyan bags, 2 shiny tan bags.\ndotted teal bags contain 3 light crimson bags, 1 mirrored black bag, 3 wavy olive bags.\nwavy chartreuse bags contain 5 drab bronze bags, 1 muted salmon bag.\nstriped brown bags contain 1 vibrant violet bag, 3 dull plum bags, 1 faded brown bag.\nplaid aqua bags contain 4 striped black bags, 5 muted white bags.\ndark purple bags contain 3 mirrored orange bags, 5 wavy lavender bags.\nmirrored tan bags contain 4 wavy indigo bags.\nposh silver bags contain 3 striped magenta bags, 1 dark chartreuse bag, 5 dotted white bags, 4 wavy tan bags.\nfaded yellow bags contain 4 plaid magenta bags.\nbright brown bags contain 4 drab tomato bags.\nmirrored turquoise bags contain 5 plaid purple bags, 1 mirrored red bag, 4 striped green bags.\nplaid green bags contain 2 drab chartreuse bags.\ndotted olive bags contain 2 dull white bags.\nshiny teal bags contain no other bags.\nshiny red bags contain 5 striped cyan bags.\ndotted orange bags contain 2 clear teal bags, 5 striped cyan bags.\nshiny violet bags contain 5 posh violet bags.\nbright indigo bags contain no other bags.\nplaid white bags contain 2 bright indigo bags.\ndrab plum bags contain no other bags.\nclear gray bags contain 1 mirrored gold bag, 1 dark beige bag, 2 drab silver bags, 4 striped green bags.\ndim magenta bags contain 1 posh cyan bag.\ndull cyan bags contain 5 pale fuchsia bags, 4 plaid fuchsia bags, 4 clear orange bags, 1 dark gold bag.\nlight brown bags contain 1 dull violet bag.\ndotted fuchsia bags contain 3 striped crimson bags, 3 dim lime bags.\ndark magenta bags contain 5 dark plum bags, 3 mirrored fuchsia bags.\ndull tomato bags contain 2 shiny orange bags, 2 dark fuchsia bags.\ndull crimson bags contain 2 muted turquoise bags.\nmirrored salmon bags contain 4 mirrored bronze bags, 1 clear white bag, 3 dark red bags, 3 dim olive bags.\nshiny aqua bags contain 3 shiny green bags, 1 light lavender bag, 3 drab salmon bags, 1 dark tan bag.\nbright plum bags contain 4 dull lavender bags, 4 muted maroon bags, 2 bright coral bags, 4 dull maroon bags.\ndark red bags contain 1 bright olive bag.\npale crimson bags contain 3 dotted green bags, 2 plaid tomato bags.\ndim bronze bags contain 4 plaid cyan bags.\nvibrant indigo bags contain 1 dark blue bag, 5 dotted orange bags.\nmirrored lavender bags contain 4 dark cyan bags, 1 shiny green bag, 1 mirrored gold bag, 1 shiny silver bag.\nbright magenta bags contain 2 faded indigo bags, 5 pale aqua bags, 4 dark magenta bags.\ndrab orange bags contain 3 dull turquoise bags, 1 light magenta bag.\nvibrant salmon bags contain 3 striped blue bags, 3 vibrant teal bags.\ndrab beige bags contain 1 drab plum bag, 2 wavy violet bags, 3 mirrored brown bags.\nmuted beige bags contain 2 wavy tan bags, 5 wavy red bags.\nbright aqua bags contain 1 dark fuchsia bag, 5 dull black bags, 2 plaid red bags, 2 bright blue bags.\nshiny tomato bags contain 4 faded brown bags.\ndim lavender bags contain 2 dotted purple bags.\nposh fuchsia bags contain 5 plaid crimson bags, 3 dark orange bags, 1 vibrant red bag.\nmuted brown bags contain 5 posh cyan bags, 4 wavy tan bags.\nlight crimson bags contain 1 shiny red bag.\nwavy coral bags contain 5 muted magenta bags, 1 dull silver bag, 4 faded olive bags.\nmirrored bronze bags contain 1 bright lavender bag, 5 muted indigo bags, 1 wavy olive bag.\nwavy salmon bags contain 4 dotted bronze bags, 3 drab plum bags.\nvibrant brown bags contain 1 posh coral bag, 2 posh green bags, 3 faded olive bags.\ndim cyan bags contain no other bags.\ndull lavender bags contain 5 striped cyan bags, 5 dim cyan bags.\npale orange bags contain 3 vibrant tan bags.\ndrab chartreuse bags contain 4 wavy teal bags, 3 plaid black bags, 1 dim blue bag.\ndrab gray bags contain 1 pale chartreuse bag.\ndim lime bags contain 3 clear teal bags, 4 posh chartreuse bags, 3 bright black bags, 5 muted red bags.\nplaid cyan bags contain 3 wavy purple bags.\ndotted lime bags contain 5 bright olive bags, 3 vibrant violet bags, 4 bright tomato bags, 3 dark magenta bags.\ndark lavender bags contain 5 light silver bags, 3 striped brown bags.\ndotted coral bags contain 2 dotted green bags, 2 wavy brown bags.\nbright orange bags contain 2 dull black bags, 5 posh purple bags, 2 muted indigo bags, 5 shiny gold bags.\nwavy white bags contain 3 plaid salmon bags, 1 muted plum bag, 3 plaid indigo bags, 3 dull aqua bags.\ndark white bags contain 5 mirrored teal bags, 3 dark lime bags.\nvibrant magenta bags contain 2 mirrored fuchsia bags, 1 clear lime bag.\nlight plum bags contain 4 dull aqua bags.\npale indigo bags contain 1 dotted coral bag, 5 drab beige bags, 3 dim green bags.\ndull yellow bags contain 3 dotted silver bags.\ndim white bags contain 3 clear chartreuse bags, 1 clear tomato bag.\nbright maroon bags contain 2 dark bronze bags.\ndotted crimson bags contain 2 plaid silver bags, 5 drab plum bags.\ndull turquoise bags contain 3 faded coral bags.\nmirrored maroon bags contain 5 shiny fuchsia bags.\nposh beige bags contain 4 plaid aqua bags, 3 muted red bags.\nshiny lavender bags contain 5 striped brown bags, 4 bright red bags.\ndrab purple bags contain 1 posh plum bag, 3 pale salmon bags, 5 striped coral bags, 1 muted bronze bag.\nposh turquoise bags contain 3 drab tan bags.\nfaded purple bags contain 4 striped fuchsia bags, 3 mirrored fuchsia bags, 2 dotted gray bags, 4 muted coral bags.\nfaded bronze bags contain 4 striped bronze bags.\nmirrored lime bags contain 1 muted lavender bag.\nposh gold bags contain 1 mirrored purple bag.\nposh maroon bags contain 1 striped beige bag, 1 wavy red bag, 1 wavy tan bag.\nclear beige bags contain 5 posh turquoise bags, 4 drab tan bags, 2 striped olive bags, 3 plaid olive bags.\ndim purple bags contain 1 striped lime bag.\nvibrant olive bags contain 2 muted yellow bags, 2 plaid aqua bags, 3 dark silver bags, 2 pale green bags.\nbright tan bags contain 5 faded purple bags, 3 dotted gray bags.\nvibrant tomato bags contain 2 pale salmon bags, 2 drab teal bags.\nplaid red bags contain 4 vibrant white bags, 1 posh tan bag.\nmirrored magenta bags contain 3 wavy blue bags, 1 muted tomato bag, 1 striped salmon bag, 1 shiny red bag.\ndrab tomato bags contain 2 wavy violet bags, 5 muted aqua bags.\nshiny magenta bags contain 4 mirrored brown bags.\ndull red bags contain 4 plaid green bags.\ndim aqua bags contain 3 mirrored blue bags, 2 bright indigo bags, 4 shiny coral bags.\nfaded gray bags contain 4 light lavender bags, 5 clear lime bags, 5 vibrant violet bags.\ndotted lavender bags contain 4 faded crimson bags.\ndull salmon bags contain 2 light plum bags.\nposh yellow bags contain 2 light yellow bags, 2 dim cyan bags, 1 clear crimson bag, 4 posh lavender bags.\nposh tomato bags contain 4 shiny lime bags, 4 bright turquoise bags, 5 shiny tan bags, 4 bright yellow bags.\nplaid lime bags contain 3 shiny salmon bags, 3 plaid crimson bags.\ndim silver bags contain 2 plaid black bags, 3 dull bronze bags, 3 shiny red bags.\ndotted magenta bags contain 3 dotted coral bags, 3 striped blue bags, 3 vibrant tan bags, 3 plaid brown bags.\nmuted teal bags contain 3 pale maroon bags.\nvibrant silver bags contain 3 drab lime bags, 1 light aqua bag.\nclear lime bags contain 5 dark plum bags, 3 dotted gray bags.\ndull aqua bags contain 3 posh black bags.\ndark plum bags contain no other bags.\ndrab yellow bags contain 4 muted beige bags, 3 clear brown bags, 5 light crimson bags, 5 wavy lavender bags.\nmirrored fuchsia bags contain no other bags.\nposh green bags contain 5 shiny brown bags.\nstriped violet bags contain 1 shiny lime bag, 4 pale magenta bags.\nbright turquoise bags contain 1 mirrored lime bag, 1 clear gold bag, 1 muted plum bag.\ndotted beige bags contain 5 plaid aqua bags, 5 muted tomato bags, 5 striped orange bags.\npale red bags contain 3 striped white bags, 2 drab olive bags, 2 drab black bags, 4 pale chartreuse bags.\nplaid coral bags contain 1 dark beige bag, 2 wavy beige bags, 5 vibrant crimson bags.\nmuted indigo bags contain 1 plaid brown bag, 5 striped crimson bags, 5 dotted gray bags, 2 clear maroon bags.\ndrab crimson bags contain 1 dim olive bag, 4 drab maroon bags, 3 shiny indigo bags.\ndotted turquoise bags contain 1 light bronze bag.\nvibrant lime bags contain 2 dim lime bags, 5 posh green bags.\nplaid olive bags contain 4 clear black bags.\npale coral bags contain 3 faded coral bags, 1 posh black bag, 5 faded purple bags, 4 plaid white bags.\npale cyan bags contain 1 light crimson bag, 1 mirrored blue bag, 4 faded aqua bags.\nplaid salmon bags contain no other bags.\ndim teal bags contain 1 dull white bag.\nbright green bags contain 3 posh beige bags.\nstriped red bags contain 2 dotted purple bags.\nplaid silver bags contain no other bags.\npale fuchsia bags contain 4 mirrored black bags, 5 faded purple bags, 4 plaid violet bags, 3 muted maroon bags.\npale lime bags contain 2 mirrored bronze bags, 3 clear magenta bags, 4 clear silver bags, 5 plaid indigo bags.\nwavy brown bags contain 3 shiny coral bags, 2 plaid silver bags.\ndark turquoise bags contain 5 drab teal bags, 5 drab gray bags.\ndrab coral bags contain 4 shiny coral bags, 1 dull turquoise bag, 1 dotted green bag, 1 light maroon bag.\nposh blue bags contain 4 light blue bags, 2 bright black bags.\ndull lime bags contain 3 faded olive bags, 1 plaid teal bag, 1 shiny lime bag.\nmirrored olive bags contain 1 mirrored beige bag, 3 faded purple bags.\ndim salmon bags contain 5 pale yellow bags, 5 plaid teal bags, 1 posh gray bag.\nclear chartreuse bags contain 2 mirrored fuchsia bags, 5 vibrant magenta bags, 1 dark orange bag.\nvibrant lavender bags contain 5 bright fuchsia bags.\nposh olive bags contain 3 dark olive bags, 2 dotted black bags, 2 clear white bags, 5 dim orange bags.\npale tan bags contain 5 dull violet bags, 5 vibrant white bags, 2 bright indigo bags, 4 vibrant orange bags.\ndim turquoise bags contain 3 faded purple bags.\nfaded fuchsia bags contain 2 clear teal bags.\nposh gray bags contain 4 dotted purple bags, 4 dotted green bags, 5 shiny yellow bags, 1 shiny tan bag.\nposh black bags contain 4 plaid silver bags, 4 vibrant magenta bags, 2 plaid white bags, 4 striped beige bags.\nvibrant gray bags contain 3 light magenta bags.\ndotted purple bags contain 1 plaid salmon bag, 2 bright indigo bags.\nmirrored red bags contain 3 bright tan bags.\nmirrored violet bags contain 5 dark cyan bags.\nfaded plum bags contain 4 light violet bags, 3 posh brown bags, 5 dull silver bags, 5 wavy blue bags.\nstriped yellow bags contain 3 clear bronze bags.\nstriped lime bags contain 2 dark aqua bags, 1 clear lime bag, 2 drab chartreuse bags, 3 clear teal bags.\nclear green bags contain 4 drab magenta bags, 3 dim coral bags.\nbright coral bags contain 4 plaid tomato bags.\nlight black bags contain 4 faded coral bags.\nplaid plum bags contain 1 posh violet bag.\npale gold bags contain 3 clear salmon bags.\ndim tomato bags contain 3 dim indigo bags, 3 dotted turquoise bags.\nbright teal bags contain 4 pale cyan bags.\nstriped gold bags contain 1 faded turquoise bag, 1 posh indigo bag, 1 bright black bag.\npale chartreuse bags contain 1 vibrant magenta bag, 5 dull fuchsia bags, 2 bright gold bags, 4 mirrored blue bags.\nposh tan bags contain 5 light violet bags, 4 drab plum bags.\npale white bags contain 3 dim blue bags, 4 pale aqua bags, 2 vibrant plum bags.\ndark cyan bags contain 2 shiny teal bags, 3 faded purple bags, 4 shiny indigo bags, 1 striped cyan bag.\nmuted turquoise bags contain 4 wavy white bags, 2 dim black bags.\ndull orange bags contain 5 bright teal bags, 3 striped teal bags.\nlight aqua bags contain 1 dotted green bag, 4 faded lavender bags, 3 striped green bags.\nclear tan bags contain 3 dim white bags.\ndull maroon bags contain 3 shiny gold bags, 2 light gold bags, 1 dotted orange bag, 1 clear lime bag.\nmuted tan bags contain 5 dotted bronze bags, 2 shiny crimson bags.\ndotted indigo bags contain 2 drab beige bags, 5 dotted purple bags, 5 muted maroon bags.\nstriped tan bags contain 4 muted chartreuse bags.\nmirrored purple bags contain 3 muted indigo bags.\nfaded tomato bags contain 4 dull gold bags, 1 pale tan bag.\nmirrored beige bags contain 1 dark chartreuse bag, 3 dim olive bags.\npale brown bags contain 4 dull blue bags, 2 plaid tomato bags.\nlight green bags contain 3 wavy purple bags, 2 faded purple bags, 4 drab plum bags, 3 shiny yellow bags.\ndark coral bags contain 2 vibrant plum bags, 4 plaid salmon bags.\ndull bronze bags contain 1 dim cyan bag, 2 posh lavender bags, 3 mirrored beige bags.\nfaded orange bags contain 2 faded crimson bags.\nmirrored white bags contain 4 wavy crimson bags, 4 pale coral bags, 3 posh silver bags.\ndark maroon bags contain 2 posh teal bags, 4 shiny plum bags.\ndrab red bags contain 5 clear red bags, 2 posh magenta bags, 2 vibrant olive bags, 5 mirrored white bags.\nshiny green bags contain 2 mirrored beige bags, 2 wavy tomato bags, 5 striped lavender bags, 1 dim silver bag.\nwavy indigo bags contain 4 dotted white bags.\ndim violet bags contain 5 faded white bags, 3 clear salmon bags.\nstriped chartreuse bags contain 3 dim brown bags, 1 mirrored gray bag, 3 clear coral bags, 2 dull aqua bags.\nstriped gray bags contain 2 vibrant olive bags, 4 posh beige bags, 3 dull beige bags.\nplaid tomato bags contain 3 clear lime bags.\ndark black bags contain 4 pale crimson bags.\ndrab bronze bags contain 5 clear turquoise bags, 4 wavy olive bags, 3 clear purple bags, 4 faded maroon bags.\ndull green bags contain 5 pale fuchsia bags, 3 shiny coral bags, 3 wavy magenta bags.\nfaded chartreuse bags contain 2 plaid beige bags, 3 drab orange bags.\nlight red bags contain 5 striped lavender bags.\nmuted lavender bags contain 2 dark salmon bags, 1 faded indigo bag, 4 clear salmon bags.\nbright white bags contain 1 drab white bag, 3 vibrant purple bags.\nplaid magenta bags contain 5 posh coral bags, 4 plaid indigo bags, 1 plaid violet bag, 1 bright beige bag.\nfaded olive bags contain 2 wavy aqua bags.\nposh cyan bags contain 5 shiny coral bags, 5 bright indigo bags, 2 plaid silver bags.\nclear red bags contain 5 dull bronze bags, 4 shiny coral bags, 2 dotted orange bags, 1 vibrant magenta bag.\nbright bronze bags contain 4 dull blue bags.\nstriped olive bags contain 3 dim lime bags, 3 pale tan bags, 2 wavy gold bags, 5 mirrored brown bags.\nmirrored green bags contain 3 dull maroon bags, 5 faded tan bags, 5 posh tan bags.\nmuted aqua bags contain 1 bright coral bag.\ndim gold bags contain 2 dotted salmon bags.\npale yellow bags contain 2 wavy coral bags.\nbright yellow bags contain 3 striped lavender bags, 4 vibrant white bags, 3 vibrant plum bags, 1 clear purple bag.\nstriped magenta bags contain 1 plaid brown bag, 1 dull indigo bag.\nstriped maroon bags contain 2 pale chartreuse bags, 4 dim black bags, 2 muted purple bags.\nbright cyan bags contain 4 muted turquoise bags.\nposh magenta bags contain 3 light gray bags, 2 mirrored blue bags, 3 mirrored silver bags, 2 dotted purple bags.\nstriped lavender bags contain 4 bright chartreuse bags, 3 muted plum bags.\ndrab lime bags contain 4 posh beige bags, 2 dim olive bags, 4 wavy fuchsia bags, 2 shiny aqua bags.\nmirrored indigo bags contain 4 dark olive bags, 3 mirrored violet bags, 4 mirrored lime bags.\nplaid crimson bags contain 5 striped indigo bags, 2 dark plum bags, 5 dotted green bags, 3 clear salmon bags.\nbright red bags contain 1 pale maroon bag.\ndotted yellow bags contain 2 bright chartreuse bags, 1 posh black bag, 4 bright indigo bags, 1 drab blue bag.\ndrab green bags contain 5 light olive bags, 4 vibrant coral bags, 3 light magenta bags.\nshiny crimson bags contain 3 bright olive bags, 1 dotted purple bag, 2 posh cyan bags, 3 dim gray bags.\npale black bags contain 3 dull tan bags, 5 plaid beige bags, 2 dull violet bags.\nclear purple bags contain 5 muted orange bags, 3 dim gray bags, 5 dotted orange bags.\npale gray bags contain 5 plaid olive bags, 3 drab coral bags, 1 bright cyan bag.\nlight lavender bags contain 5 vibrant white bags, 1 drab plum bag, 5 faded indigo bags, 4 shiny gold bags.\ndull beige bags contain 2 dull black bags.\nclear magenta bags contain 5 posh maroon bags.\nmuted orange bags contain 2 dull violet bags, 4 striped beige bags, 1 plaid salmon bag, 3 mirrored fuchsia bags.\nwavy gold bags contain 2 drab turquoise bags.\npale purple bags contain 1 vibrant crimson bag.\ndark silver bags contain 1 dotted orange bag, 3 plaid beige bags, 5 faded white bags.\nclear lavender bags contain 2 pale violet bags, 5 clear yellow bags, 5 striped salmon bags.\nstriped salmon bags contain 4 dim crimson bags.\nshiny gold bags contain 3 vibrant orange bags, 3 plaid silver bags.\nlight coral bags contain 4 faded tomato bags, 1 dim lime bag, 1 dotted coral bag, 4 dim chartreuse bags.\nmirrored coral bags contain 2 posh purple bags, 1 dull fuchsia bag, 4 faded maroon bags, 2 plaid indigo bags.\nclear aqua bags contain 5 dim gray bags, 1 dull cyan bag, 2 dim black bags.\nclear salmon bags contain 2 posh gray bags, 5 pale maroon bags.\nmuted plum bags contain 2 shiny yellow bags, 1 plaid salmon bag, 3 shiny indigo bags, 4 clear lime bags.\nbright gold bags contain 1 dull blue bag, 2 bright indigo bags, 4 muted red bags, 4 clear maroon bags.\ndrab brown bags contain 2 dark chartreuse bags.\nplaid turquoise bags contain 4 striped red bags, 2 faded magenta bags, 1 light magenta bag.\nvibrant turquoise bags contain 2 striped yellow bags, 3 plaid fuchsia bags, 2 shiny coral bags, 1 clear yellow bag.\ndull indigo bags contain 1 drab plum bag, 4 dark fuchsia bags, 3 dotted gray bags.\nwavy aqua bags contain 4 dull tan bags, 1 shiny tan bag, 1 striped beige bag.\nmirrored plum bags contain 4 dark fuchsia bags, 5 muted white bags.\nshiny black bags contain 2 light aqua bags.\nmirrored blue bags contain 2 dim green bags, 4 vibrant white bags, 1 faded orange bag.\nplaid chartreuse bags contain 1 clear tomato bag, 4 shiny orange bags.\ndotted red bags contain 3 plaid beige bags.\nwavy red bags contain 1 striped fuchsia bag, 2 plaid brown bags, 1 shiny fuchsia bag, 2 dotted crimson bags.\nmuted violet bags contain 4 posh black bags, 5 shiny turquoise bags, 5 shiny yellow bags.\ndotted gray bags contain 5 dull violet bags, 5 dark plum bags, 2 bright indigo bags, 2 wavy bronze bags.\nfaded maroon bags contain 4 pale aqua bags, 2 clear tomato bags.\ndark gray bags contain 1 light orange bag, 1 posh brown bag.\ndull gray bags contain 5 faded violet bags, 1 dotted turquoise bag.\nmuted maroon bags contain 1 shiny tan bag, 5 light maroon bags, 2 dotted green bags.\nclear turquoise bags contain 2 clear salmon bags, 1 dark cyan bag, 1 striped green bag.\nwavy bronze bags contain no other bags.\nmuted magenta bags contain 5 striped coral bags, 4 dim lime bags, 1 posh red bag, 1 plaid blue bag.\nmirrored cyan bags contain 2 posh violet bags, 5 bright olive bags, 3 dotted green bags, 5 drab gold bags.\nwavy blue bags contain 1 dark coral bag, 1 dim olive bag, 4 dim black bags, 5 drab chartreuse bags.\nvibrant cyan bags contain 3 posh maroon bags, 5 dim beige bags, 3 dark blue bags.\ndim chartreuse bags contain 4 dull tan bags, 5 drab magenta bags.\ndark salmon bags contain 5 bright indigo bags, 4 shiny crimson bags, 3 dotted purple bags, 2 dark coral bags.\nplaid brown bags contain 2 dim olive bags.\nwavy yellow bags contain 2 drab plum bags, 3 muted orange bags, 5 pale coral bags.\nvibrant tan bags contain 5 bright bronze bags, 2 shiny lime bags.\nshiny beige bags contain 2 dull green bags.\ndrab gold bags contain 5 dotted crimson bags.\nfaded teal bags contain 5 dull tan bags, 3 dotted bronze bags, 4 bright indigo bags, 5 posh red bags.\nmirrored gray bags contain 4 muted bronze bags.\nlight fuchsia bags contain 5 pale beige bags, 1 vibrant lavender bag.\nclear indigo bags contain 1 dotted fuchsia bag, 3 dull aqua bags, 1 dark chartreuse bag.\nbright purple bags contain 4 wavy orange bags, 4 mirrored violet bags, 4 light turquoise bags.\npale green bags contain 1 light aqua bag, 3 bright yellow bags.\ndim olive bags contain 5 dotted green bags, 5 dull violet bags.\nlight bronze bags contain 1 dark aqua bag.\nvibrant chartreuse bags contain 3 dark salmon bags.\npale aqua bags contain 5 dotted purple bags, 4 dark plum bags.\nfaded black bags contain 5 mirrored fuchsia bags, 5 striped green bags.\nshiny blue bags contain 1 faded gray bag, 5 dotted indigo bags, 4 faded magenta bags.\nmuted red bags contain 1 light violet bag, 4 dim cyan bags.\nshiny yellow bags contain 2 light maroon bags, 3 wavy violet bags.\nclear bronze bags contain 1 bright indigo bag, 1 posh lavender bag, 2 dull salmon bags, 4 muted bronze bags.\nvibrant crimson bags contain 5 drab blue bags.\nshiny purple bags contain 1 shiny teal bag."
  println(countOutermostBags(input, "shiny gold"))
  println(countNumberOfRequiredBags(input, "shiny gold"))
}

case class Bag(label: String, children: Map[String, Int]) {
  def getAllChildren(bags: Map[String, Bag]): Set[String] = {
    val childrenSets: Set[String] = this.children.keySet.flatMap(bags(_).getAllChildren(bags))
    this.children.keySet.union(childrenSets)
  }

  def countAllChildren(bags: Map[String, Bag]): Int = {
    val childrenCount = this.children.map(b => (bags(b._1), b._2)).map(p => p._1.countAllChildren(bags) * p._2).sum
    this.children.values.sum + childrenCount
  }
}
